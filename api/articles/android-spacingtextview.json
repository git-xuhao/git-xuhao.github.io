{"title":"Android TextView 实现文字间距","slug":"android-spacingtextview","date":"2016-04-18T08:35:00.000Z","updated":"2017-12-17T15:53:09.000Z","comments":true,"path":"api/articles/android-spacingtextview.json","photos":[],"link":"","excerpt":"概述：Android系统中TextView默认显示中文时会比较紧凑，不是很美观。为了让每行保持一定的行间距，可以设置属性android:lineSpacingExtra或android:lineSpacingMultiplier。<br>但是有时候我们需要在TextView的文本之间有间距，两个字的话，我们可以在xml文件中，用敲空格的方式来实现，如果有很多文本或者是一个变量的文本呢。我们还这样用敲空格的方式来实现吗？oh no~！<br>如何实现行间距和文本间距呢？（请往下看 ↓）。1、设置TextView的行间距在TextView控件中添加属性：<br>1<br>2<br>android:lineSpacingExtra=\"13dp\"   //设置行间距<br>android:lineSpacingMultiplier=\"1.2\"  //设置行间距的倍数。如”1.2”<br>","covers":["http://img.blog.csdn.net/20160311173839446"],"content":"<h2 id=\"概述：\"><a href=\"#概述：\" class=\"headerlink\" title=\"概述：\"></a><strong>概述：</strong></h2><p>Android系统中TextView默认显示中文时会比较紧凑，不是很美观。为了让每行保持一定的行间距，可以设置属性android:lineSpacingExtra或android:lineSpacingMultiplier。<br>但是有时候我们需要在TextView的文本之间有间距，两个字的话，我们可以在xml文件中，用敲空格的方式来实现，如果有很多文本或者是一个变量的文本呢。我们还这样用敲空格的方式来实现吗？oh no~！<br>如何实现行间距和文本间距呢？（请往下看 ↓）。</p>\n<h4 id=\"1、设置TextView的行间距\"><a href=\"#1、设置TextView的行间距\" class=\"headerlink\" title=\"1、设置TextView的行间距\"></a>1、设置TextView的行间距</h4><p>在TextView控件中添加属性：<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">android:</span>lineSpacingExtra=<span class=\"string\">\"13dp\"</span>   <span class=\"comment\">//设置行间距</span></span><br><span class=\"line\"><span class=\"symbol\">android:</span>lineSpacingMultiplier=<span class=\"string\">\"1.2\"</span>  <span class=\"comment\">//设置行间距的倍数。如”1.2”</span></span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<h4 id=\"2、设置TextView的文本间距\"><a href=\"#2、设置TextView的文本间距\" class=\"headerlink\" title=\"2、设置TextView的文本间距\"></a>2、设置TextView的文本间距</h4><ul>\n<li><p>先看下效果图：<br><img src=\"http://img.blog.csdn.net/20160311173839446\" alt=\"这里写图片描述\"></p>\n</li>\n<li><p>自定义的TextView 的代码如下：</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.woyou.spacingtextview;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.text.Spannable;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.text.SpannableString;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.text.style.ScaleXSpan;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.util.AttributeSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.widget.TextView;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Created by Xiho on 2016/3/7.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SpacingTextView</span> <span class=\"keyword\">extends</span> <span class=\"title\">TextView</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> letterSpacing = LetterSpacing.BIGGEST;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> CharSequence originalText = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SpacingTextView</span><span class=\"params\">(Context context)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(context);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SpacingTextView</span><span class=\"params\">(Context context, AttributeSet attrs)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(context, attrs);</span><br><span class=\"line\">        originalText = <span class=\"keyword\">super</span>.getText();</span><br><span class=\"line\">        applyLetterSpacing();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.invalidate();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SpacingTextView</span><span class=\"params\">(Context context, AttributeSet attrs, <span class=\"keyword\">int</span> defStyle)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(context, attrs, defStyle);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">float</span> <span class=\"title\">getLetterSpacing</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> letterSpacing;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setLetterSpacing</span><span class=\"params\">(<span class=\"keyword\">float</span> letterSpacing)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.letterSpacing = letterSpacing;</span><br><span class=\"line\">        applyLetterSpacing();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setText</span><span class=\"params\">(CharSequence text, BufferType type)</span> </span>&#123;</span><br><span class=\"line\">        originalText = text;</span><br><span class=\"line\">        applyLetterSpacing();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> CharSequence <span class=\"title\">getText</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> originalText;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 字距为任何字符串（技术上，一个简单的方法为CharSequence不使用）的TextView</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">applyLetterSpacing</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span> == <span class=\"keyword\">null</span> || <span class=\"keyword\">this</span>.originalText == <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        StringBuilder builder = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; originalText.length(); i++) &#123;</span><br><span class=\"line\">            String c = <span class=\"string\">\"\"</span>+ originalText.charAt(i);</span><br><span class=\"line\">            builder.append(c.toLowerCase());</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(i+<span class=\"number\">1</span> &lt; originalText.length()) &#123;</span><br><span class=\"line\">                builder.append(<span class=\"string\">\"\\u00A0\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        SpannableString finalText = <span class=\"keyword\">new</span> SpannableString(builder.toString());</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(builder.toString().length() &gt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt; builder.toString().length(); i+=<span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">                finalText.setSpan(<span class=\"keyword\">new</span> ScaleXSpan((letterSpacing+<span class=\"number\">1</span>)/<span class=\"number\">10</span>), i, i+<span class=\"number\">1</span>, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.setText(finalText, BufferType.SPANNABLE);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LetterSpacing</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> <span class=\"keyword\">float</span> NORMAL = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> <span class=\"keyword\">float</span> NORMALBIG = (<span class=\"keyword\">float</span>)<span class=\"number\">0.025</span>;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> <span class=\"keyword\">float</span> BIG = (<span class=\"keyword\">float</span>)<span class=\"number\">0.05</span>;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> <span class=\"keyword\">float</span> BIGGEST = (<span class=\"keyword\">float</span>)<span class=\"number\">0.2</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>在activity 中使用：</li>\n</ul>\n<figure class=\"highlight aspectj\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> SpacingTextView mSpacingTextView;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">        setContentView(R.layout.activity_main);</span><br><span class=\"line\">        mSpacingTextView = (SpacingTextView) findViewById(R.id.space_text);</span><br><span class=\"line\">        mSpacingTextView.setText(getResources().getString(R.string.test));</span><br><span class=\"line\">        <span class=\"comment\">//Or any float. To reset to normal, use 0 or LetterSpacingTextView.Spacing.NORMAL</span></span><br><span class=\"line\">        mSpacingTextView.setLetterSpacing(<span class=\"number\">10</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>xml 文件如下：</li>\n</ul>\n<figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"utf-8\"</span>?&gt;</span><br><span class=\"line\">&lt;RelativeLayout xmlns:android=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span><br><span class=\"line\">    xmlns:app=<span class=\"string\">\"http://schemas.android.com/apk/res-auto\"</span></span><br><span class=\"line\">    xmlns:tools=<span class=\"string\">\"http://schemas.android.com/tools\"</span></span><br><span class=\"line\">    android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">    android:layout_height=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">    android:paddingBottom=<span class=\"string\">\"@dimen/activity_vertical_margin\"</span></span><br><span class=\"line\">    android:paddingLeft=<span class=\"string\">\"@dimen/activity_horizontal_margin\"</span></span><br><span class=\"line\">    android:paddingRight=<span class=\"string\">\"@dimen/activity_horizontal_margin\"</span></span><br><span class=\"line\">    android:paddingTop=<span class=\"string\">\"@dimen/activity_vertical_margin\"</span></span><br><span class=\"line\">    app:layout_behavior=<span class=\"string\">\"@string/appbar_scrolling_view_behavior\"</span></span><br><span class=\"line\">    tools:context=<span class=\"string\">\"com.woyou.spacingtextview.MainActivity\"</span></span><br><span class=\"line\">    tools:showIn=<span class=\"string\">\"@layout/activity_main\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;com.woyou.spacingtextview.SpacingTextView</span><br><span class=\"line\">        android:id=<span class=\"string\">\"@+id/space_text\"</span></span><br><span class=\"line\">        android:layout_width=<span class=\"string\">\"wrap_content\"</span></span><br><span class=\"line\">        android:lineSpacingExtra=<span class=\"string\">\"13dp\"</span></span><br><span class=\"line\">        android:layout_height=<span class=\"string\">\"wrap_content\"</span></span><br><span class=\"line\">        android:text=<span class=\"string\">\"@string/test\"</span> /&gt;</span><br><span class=\"line\">&lt;<span class=\"regexp\">/RelativeLayout&gt;</span></span><br></pre></td></tr></table></figure>\n<p>以上代码使用起来很方便，添加到自己的项目中看下效果。</p>\n<p>TextView控件以开源：<a href=\"https://github.com/git-xuhao/SpacingTextView\" target=\"_blank\" rel=\"noopener\">SpacingTextView</a><br>如果你想实现TextView的 文本对齐；请参考开源项目：<a href=\"https://github.com/androiddevelop/AlignTextView\" target=\"_blank\" rel=\"noopener\">AlignTextView</a></p>\n","categories":[{"name":"Android","slug":"Android","count":11,"path":"api/categories/Android.json"}],"tags":[{"name":"Android","slug":"Android","count":11,"path":"api/tags/Android.json"},{"name":"TextView","slug":"TextView","count":1,"path":"api/tags/TextView.json"}]}